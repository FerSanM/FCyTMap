<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Materias</title>
</head>
<body>

{% if request.session.user_data %}
    {% if usuario %}
    <h1>Bienvenido, {{ usuario.nombre }}, ID:{{ usuario.id }}</h1>
    {% endif %}
    <h1>Materias</h1>
    <table>
    <tr>
         {% for ubicacion in ubicaciones %}
        <td>{{ ubicacion.latitud }}</td>
        <td>{{ ubicacion.longitud }}</td>
         {% endfor %}
    </tr>
    </table>
    <form method="get">
        <label for="semestre">Seleccionar Semestre:</label>
        <select name="semestre" id="semestre">
            <!-- Opciones del semestre -->
        </select>
        <label for="carrera">Seleccionar Carrera:</label>
        <select name="carrera" id="carrera">
            <!-- Opciones de carrera -->
        </select>
        <input type="submit" value="Filtrar">
    </form>

    <form method="post" action="{% url 'guardar_materias' %}">
        {% csrf_token %}
        {% for materia in materias %}
        <label>
            <input type="checkbox" name="materias" value="{{ materia.id }}"> {{ materia.descripcion }}
        </label>
        <br>
        {% endfor %}
        <input type="hidden" name="usuario_id" value="{{ usuario.id }}">
        <input type="submit" value="Guardar">
    </form>

    <!-- Tabla de materias seleccionadas -->
    <h2>Materias Seleccionadas</h2>
    <table border="1">
        <tr>
            <th>Materia Seleccionada</th>
            <th>Acción</th> <!-- Columna para el botón Eliminar -->
        </tr>
        {% for materia_seleccionada in materias_seleccionadas %}
        <tr>
            <td>{{ materia_seleccionada.descripcion }}</td>
            <td>
                <form method="post" action="{% url 'eliminar_materias' %}" >
                    {% csrf_token %}
                    <input type="hidden" name="materia_id" value="{{ materia_seleccionada.id }}">
                    <input type="hidden" name="usuario_id" value="{{ usuario.id }}">
                    <input type="submit" value="Eliminar">
                </form>
            </td>
        </tr>
        {% endfor %}
    </table>
{% endif %}

</body>
</html>

